# AXI协议规范总结
<https://blog.csdn.net/HackEle/article/details/125775935?spm=1001.2014.3001.5506>
优点：  
适合高带宽和低延迟的设计  
不需要复杂的桥即可提供高频操作  
可以满足多种组件的接口需求  
适合高初始访问延迟的存储器控制器  
提供互联架构实现的灵活性  
向后兼容AHB与APB接口  
特点：  
分离的地址/控制和数据阶段  
通过使用字节选通信号的方式支持非对齐数据传输  
使用突发传输时只需要传输起始地址  
允许地址信息提前于实际数据传输发送  
分离的读写数据通道，这可以提供低损耗的DMA  
支持发出多个未完成的地址  
支持乱序传输完成  
允许简单添加寄存器阶段以提供时序收敛  

## 简述

### 五个独立事务通道
读地址
读数据
写地址
写数据
写响应
<img width="918" height="1046" alt="image" src="https://github.com/user-attachments/assets/93ad255f-44b7-4360-97cf-df8a9a013a1c" />  
|读数据通道|写数据通道|写响应通道|
|:---:|:---:|:---:|
|位宽可为8、16、32、64、128、256、512、1024bit的数据总线。表示读事务完成状态的读响应信号。|位宽可为8、16、32、64、128、256、512、1024bit的数据总线。为每一个8bit数据准备的字节选通信号，用于指示数据的哪几个字节是有效的。写数据通道总是被buffer的，因此主设备可以在未收到前一次写事务的从设备响应消息时再次执行写操作。|从设备使用写响应通道回应写事务，全部的写事务都需要写响应通道的完成信号，并且完成信号仅在一个写事务彻底完成时才产生，而并不会在每次数据传输时都产生。|

### AXI互联结构

<img width="916" height="247" alt="image" src="https://github.com/user-attachments/assets/8b5022d6-006f-4c06-b315-d5657cf7fabe" />  

### AXI中使用寄存器切片
每一个AXI通道都只能单项传输信息，并且架构并没有要求各个通道间具有固定的时序依赖要求。因此，寄存器切片可以插入到任何通道的任何位置，不过这会带来额外的延迟（Latency）。  

## AXI术语

### AXI组件与拓扑结构
下列术语描述了AXI组件：  
组件（Component）  
主组件（Master component）  
从组件（Slave component），从组件包含存储器子组件和外设子组件  
互联组件  
对于特定的AXI传输，上游（Upstream）与下游（Downstream）指代AXI拓扑中AXI组件的相对位置。  

### AXI传输与存储器类型
当AXI主设备发起AXI操作时，对于AXI从设备：  
AXI总线上所需的完整操作集形成AXI事务（Transaction）。  
任何传输的有效数据都作为一次AXI突发传输（Burst）。  
一次突发传输可以包含多次数据传输，一次数据传输称为一拍（Beat）。  

## AXI信号描述

### 公共信号

|信号名|来源|描述|
|:---:|:---:|:---:|
|ACLK|时钟源|公共时钟信号|
|ARESETn|复位源|公共复位信号，低有效|

### 写地址通道信号
|信号名|来源|描述|
|:---:|:---:|:---:|
|AWADDR|主设备|写地址，写突发操作中第一次数据传输的地址|
|AWVALID|主设备|主设备给出的地址和相关控制信号有效|
|AWREADY|从设备|从设备已准备好接收地址和相关的控制信号|

### 写数据通道信号

|信号名|来源|描述|
|:---:|:---:|:---:|
|WDATA|主设备|写出的数据|
|WLAST|主设备|该信号用于标识当前传输是否为突发传输中的最后一次传输|
|WVALID|主设备|主设备给出的数据和字节选通信号有效|
|WREADY|从设备|从设备已准备好接收数据选通信号|

### 写响应通道信号

|信号名|来源|描述|
|:---:|:---:|:---:|
|BVALID|从设备|从设备给出的写响应信号有效|
|BREADY|主设备|主设备已准备好接受写响应信号|

### 读地址通道信号

|信号名|来源|描述|
|:---:|:---:|:---:|
|ARADDR|主设备|读地址，读突发操作中第一次数据传输的地址|
|ARVALID|主设备|主设备给出的地址和相关控制信号有效|
|ARREADY|从设备|从设备已准备好接收地址和相关的控制信号|

### 读数据通道信号

|信号名|来源|描述|
|:---:|:---:|:---:|
|RDATA|从设备|读出的数据|
|RLAST|从设备|该信号用于标识当前传输是否为突发传输中的最后一次传输|
|RVALID|从设备|从设备给出的数据和响应信息有效|
|RREADY|主设备|主设备已准备好接收读取的数据和响应信息|

### 低功耗接口信号


## 单接口需求

### 时钟

### 复位

### 基本读写事务

<img width="905" height="342" alt="image" src="https://github.com/user-attachments/assets/fe928014-520a-494b-b195-7adc4b73197a" />  

<img width="877" height="322" alt="image" src="https://github.com/user-attachments/assets/20fbf5e5-eb90-4195-9e2e-865d23bad7af" />  

### 通道间的关系  

为了避免死锁，下列依赖规则必须遵守：  
在任何事务中：  
发送信息的AXI接口的VALID信号不能依赖于接收信息的AXI接口的READY信号。  
接收信号的的AXI接口在其自身的READY信号有效前可以等待对方的VALID信号。  


### 通道握手信号依赖关系

主设备在使能AWVALID或WVALID后才能等待从设备使能AWREADY或WREADY。  
从设备在使能AWREADY前可以等待AWVALID或WVALID有效。  
从设备可以在使能WREADY前等待AWVALID与WVALID有效。  
从设备在AWVALID或WVALID有效前可以先使能WREADY。  
从设备等待AWVALID、AWREADY、WVALID、WREADY有效后才能使能BVALID。  
从设备必须等待WLAST有效后才能使能BVALID，因为写响应必须发生在一次写事务中的最后一次数据传输后。  
从设备必须在使能BVALID后才能等待主设备使能BREADY。  
主设备可以在使能BREADY前等待BVALID。  
主设备可以在BVALID有效前使能BREADY。  

### 事务结构
AXI协议是基于突发的，主设备向从设备传送事务的控制信息和第一个字节的地址，然后，从设备必须在此后的每次传输中计算数据地址。  
突发传输不能跨越4KB地址边界。  

突发长度：  
突发长度由下列字段指定：  
对于读传输，ARLEN[7:0]。  
对于写传输：AWLEN[7:0]。  
AXI3支持1~16的突发长度。  
AXI4：  
对于INCR突发类型，支持1~256的突发长度。  
对于其它突发类型，支持1~16的突发长度。  


突发大小：  
该字段表示每次突发数据传输或每个节拍中中数据的字节数，由以下字段指定：  
对于读传输，ARSIZE[2:0]。  
对于写传输，AWSIZE[2:0]。  
突发大小 = 2^AxSIZE  
如果AXI的总线比突发大小宽，AXI接口每次传输就必须根据地址判断使用哪几条数据线，任何一次传输的大小都不能超过事务中任一代理的数据总线宽度。  

**关键计算：一次突发传输的总字节数 = AxLEN * (2^{AxSIZE})。**  

AXI协议定义了三种突发类型：  
固定（FIXED）：在突发事务中，每次传输的地址一致，有效的字节线也是一致的，但是可以通过WSTRB信号控制实际有效的字节。这种方式通常用于对同一位置的重复访问，如读取或清空FIFO时。  
递增（INCR）：在一次递增突发事务中，每次传输，地址都会在之前的地址基础上递增，递增量为传输大小。  
回绕（WRAP）：这种类型和递增方式类似，但是，地址到达上界后，地址就会回绕到下界。  


## 事务属性



































































